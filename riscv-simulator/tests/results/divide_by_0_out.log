=================================================================
        RISC-V Assembly Simulator - Executor Test
=================================================================

[STEP 1] Parsing assembly file...
[OK] Loaded 8 instructions
[00] main : lw x10, 0(x0)
[01] lw x11, 4(x0)
[02] beq x11, x0, error
[03] div x12, x10, x11
[04] sw x12, 8(x0)
[05] jal x0, end
[06] error : li x12, -1
[07] sw x12, 8(x0)
DATA[00] a = 17 @ address 0
DATA[01] b = 0 @ address 4
DATA[02] result = 0 @ address 8

[STEP 2] Initializing memory...
[OK] Memory initialized (size: 400 bytes)

[STEP 3] Encoding instructions...
[00] (PC=0x00000000) main: lw x10, 0(x0)[ENCODE] LW x10, 0(x0) -> 0x00002503
 -> encoded: 0x00002503
[01] (PC=0x00000004) lw x11, 4(x0)[ENCODE] LW x11, 4(x0) -> 0x00402583
 -> encoded: 0x00402583
[02] (PC=0x00000008) beq x11, x0, error[ENCODE] beq x11, x0, error -> off=16 (PC=0x00000008) -> 0x00058863
 -> encoded: 0x00058863
[03] (PC=0x0000000C) div x12, x10, x11[ENCODE] DIV x12, x10, x11 -> 0x02B54633
 -> encoded: 0x02B54633
[04] (PC=0x00000010) sw x12, 8(x0)[ENCODE] SW x12, 8(x0) -> 0x00C02423
 -> encoded: 0x00C02423
[05] (PC=0x00000014) jal x0, end[ENCODE] JAL x0, end (off=0) -> 0x0000006F
 -> encoded: 0x0000006F
[06] (PC=0x00000018) error: li x12, -1[ENCODE] LI x12, -1 -> (ADDI x12, x0, -1) -> 0xFFF00613
 -> encoded: 0xFFF00613
[07] (PC=0x0000001C) sw x12, 8(x0)[ENCODE] SW x12, 8(x0) -> 0x00C02423
 -> encoded: 0x00C02423
[OK] Encoded 8/8 instructions

[STEP 4] Loading program into memory...
[OK] Program loaded at address 0x00000000

[STEP 4B] Loading data section into memory...
[OK] Data loaded starting at address 0x00000020
[OK] Data loaded at address 0x00000020

[DEBUG] Memory dump after loading:
00000000: 00002503
00000004: 00402583
00000008: 00058863
0000000c: 02b54633
00000010: 00c02423
00000014: 0000006f
00000018: fff00613
0000001c: 00c02423
00000020: 00000011
00000024: 00000000
00000028: 00000000
0000002c: 00000000
00000030: 00000000
00000034: 00000000
00000038: 00000000
0000003c: 00000000
00000040: 00000000
00000044: 00000000
00000048: 00000000
0000004c: 00000000
00000050: 00000000
00000054: 00000000
00000058: 00000000
0000005c: 00000000
00000060: 00000000
00000064: 00000000
00000068: 00000000
0000006c: 00000000
00000070: 00000000
00000074: 00000000
00000078: 00000000
0000007c: 00000000
00000080: 00000000
00000084: 00000000
00000088: 00000000
0000008c: 00000000
00000090: 00000000
00000094: 00000000
00000098: 00000000
0000009c: 00000000
000000a0: 00000000
000000a4: 00000000
000000a8: 00000000
000000ac: 00000000
000000b0: 00000000
000000b4: 00000000
000000b8: 00000000
000000bc: 00000000

[STEP 5] Initializing CPU...
[OK] CPU initialized

[DEBUG] Initial CPU state:

=== CPU STATE ===
PC: 0x00000000
Instructions executed: 0
Halted: NO
Error: NO

=== REGISTERS ===
PC: 0x00000000
x00: 0x00000000 (          0) | x01: 0x00000000 (          0)
x02: 0x00000000 (          0) | x03: 0x00000000 (          0)
x04: 0x00000000 (          0) | x05: 0x00000000 (          0)
x06: 0x00000000 (          0) | x07: 0x00000000 (          0)
x08: 0x00000000 (          0) | x09: 0x00000000 (          0)
x10: 0x00000000 (          0) | x11: 0x00000000 (          0)
x12: 0x00000000 (          0) | x13: 0x00000000 (          0)
x14: 0x00000000 (          0) | x15: 0x00000000 (          0)
x16: 0x00000000 (          0) | x17: 0x00000000 (          0)
x18: 0x00000000 (          0) | x19: 0x00000000 (          0)
x20: 0x00000000 (          0) | x21: 0x00000000 (          0)
x22: 0x00000000 (          0) | x23: 0x00000000 (          0)
x24: 0x00000000 (          0) | x25: 0x00000000 (          0)
x26: 0x00000000 (          0) | x27: 0x00000000 (          0)
x28: 0x00000000 (          0) | x29: 0x00000000 (          0)
x30: 0x00000000 (          0) | x31: 0x00000000 (          0)


[STEP 6] Executing program...
-----------------------------------------------------------------

=== Starting CPU Execution ===

[STEP 0] PC=0x00000000, Instruction=0x00002503
[DECODE DISPATCH] Opcode=0x03
[DECODE] I-Type: funct3=0x2, rs1=0, rd=10, imm=0
[EXEC] LW x10, 0(x0) -> Load from 0x00000020 = 0x00000011

[STEP 1] PC=0x00000004, Instruction=0x00402583
[DECODE DISPATCH] Opcode=0x03
[DECODE] I-Type: funct3=0x2, rs1=0, rd=11, imm=4
[EXEC] LW x11, 4(x0) -> Load from 0x00000024 = 0x00000000

[STEP 2] PC=0x00000008, Instruction=0x00058863
[DECODE DISPATCH] Opcode=0x63
[DECODE] B-Type: funct3=0x0, rs1=11, rs2=0, imm=16
[EXEC] BEQ x11, x0, imm=16 -> TAKEN (rs1=0x00000000, rs2=0x00000000)

[STEP 3] PC=0x00000018, Instruction=0xFFF00613
[DECODE DISPATCH] Opcode=0x13
[DECODE] I-Type: funct3=0x0, rs1=0, rd=12, imm=-1
[EXEC] LI x12, -1 -> x12 = 0xFFFFFFFF

[STEP 4] PC=0x0000001C, Instruction=0x00C02423
[DECODE DISPATCH] Opcode=0x23
[DECODE] S-Type (placeholder)
[EXEC] SW x12, 8(x0) -> Store 0xFFFFFFFF to 0x00000028
[INFO] cpu_step: PC (0x00000020) reached end of program (program size: 32 bytes)

=== CPU Execution Finished ===
Total instructions executed: 5
-----------------------------------------------------------------

[DEBUG] Memory dump (data region) after execution:
00000020: 00000011
00000024: 00000000
00000028: ffffffff
0000002c: 00000000
00000030: 00000000
00000034: 00000000
00000038: 00000000
0000003c: 00000000

[STEP 7] Final CPU state:
-----------------------------------------------------------------

=== CPU STATE ===
PC: 0x00000020
Instructions executed: 5
Halted: YES
Error: NO

=== REGISTERS ===
PC: 0x00000020
x00: 0x00000000 (          0) | x01: 0x00000000 (          0)
x02: 0x00000000 (          0) | x03: 0x00000000 (          0)
x04: 0x00000000 (          0) | x05: 0x00000000 (          0)
x06: 0x00000000 (          0) | x07: 0x00000000 (          0)
x08: 0x00000000 (          0) | x09: 0x00000000 (          0)
x10: 0x00000011 (         17) | x11: 0x00000000 (          0)
x12: 0xFFFFFFFF (         -1) | x13: 0x00000000 (          0)
x14: 0x00000000 (          0) | x15: 0x00000000 (          0)
x16: 0x00000000 (          0) | x17: 0x00000000 (          0)
x18: 0x00000000 (          0) | x19: 0x00000000 (          0)
x20: 0x00000000 (          0) | x21: 0x00000000 (          0)
x22: 0x00000000 (          0) | x23: 0x00000000 (          0)
x24: 0x00000000 (          0) | x25: 0x00000000 (          0)
x26: 0x00000000 (          0) | x27: 0x00000000 (          0)
x28: 0x00000000 (          0) | x29: 0x00000000 (          0)
x30: 0x00000000 (          0) | x31: 0x00000000 (          0)

-----------------------------------------------------------------

[SUMMARY]
  Program instructions: 8
  Instructions executed: 5
  Final PC: 0x00000020
  CPU halted: YES
  CPU error: NO

[CLEANUP] Freeing memory...
[OK] Cleanup complete

=================================================================
                    Execution Completed
=================================================================
