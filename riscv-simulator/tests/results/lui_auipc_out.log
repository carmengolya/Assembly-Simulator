=================================================================
        RISC-V Assembly Simulator - Executor Test
=================================================================

[STEP 1] Parsing assembly file...
[OK] Loaded 4 instructions
[00] lui x1, 0x12345
[01] auipc x2, 0x23
[02] addi x3, x1, 1
[03] sw x3, 24(x0)

[STEP 2] Initializing memory...
[OK] Memory initialized (size: 400 bytes)

[STEP 3] Encoding instructions...
[00] (PC=0x00000000) lui x1, 0x12345[ENCODE] LUI x1, 0x12345 -> 0x123450B7
 -> encoded: 0x123450B7
[01] (PC=0x00000004) auipc x2, 0x23[ENCODE] AUIPC x2, 0x00023 -> 0x00023117
 -> encoded: 0x00023117
[02] (PC=0x00000008) addi x3, x1, 1[ENCODE] ADDI x3, x1, 1 -> 0x00108193
 -> encoded: 0x00108193
[03] (PC=0x0000000C) sw x3, 24(x0)[ENCODE] SW x3, 24(x0) -> 0x00302C23
 -> encoded: 0x00302C23
[OK] Encoded 4/4 instructions

[STEP 4] Loading program into memory...
[OK] Program loaded at address 0x00000000
[OK] Data loaded at address 0x00000010

[DEBUG] Memory dump after loading:
00000000: 123450b7
00000004: 00023117
00000008: 00108193
0000000c: 00302c23
00000010: 00000000
00000014: 00000000
00000018: 00000000
0000001c: 00000000
00000020: 00000000
00000024: 00000000
00000028: 00000000
0000002c: 00000000
00000030: 00000000
00000034: 00000000
00000038: 00000000
0000003c: 00000000
00000040: 00000000
00000044: 00000000
00000048: 00000000
0000004c: 00000000
00000050: 00000000
00000054: 00000000
00000058: 00000000
0000005c: 00000000
00000060: 00000000
00000064: 00000000
00000068: 00000000
0000006c: 00000000
00000070: 00000000
00000074: 00000000
00000078: 00000000
0000007c: 00000000

[STEP 5] Initializing CPU...
[OK] CPU initialized

[DEBUG] Initial CPU state:

=== CPU STATE ===
PC: 0x00000000
Instructions executed: 0
Halted: NO
Error: NO

=== REGISTERS ===
PC: 0x00000000
x00: 0x00000000 (          0) | x01: 0x00000000 (          0)
x02: 0x00000000 (          0) | x03: 0x00000000 (          0)
x04: 0x00000000 (          0) | x05: 0x00000000 (          0)
x06: 0x00000000 (          0) | x07: 0x00000000 (          0)
x08: 0x00000000 (          0) | x09: 0x00000000 (          0)
x10: 0x00000000 (          0) | x11: 0x00000000 (          0)
x12: 0x00000000 (          0) | x13: 0x00000000 (          0)
x14: 0x00000000 (          0) | x15: 0x00000000 (          0)
x16: 0x00000000 (          0) | x17: 0x00000000 (          0)
x18: 0x00000000 (          0) | x19: 0x00000000 (          0)
x20: 0x00000000 (          0) | x21: 0x00000000 (          0)
x22: 0x00000000 (          0) | x23: 0x00000000 (          0)
x24: 0x00000000 (          0) | x25: 0x00000000 (          0)
x26: 0x00000000 (          0) | x27: 0x00000000 (          0)
x28: 0x00000000 (          0) | x29: 0x00000000 (          0)
x30: 0x00000000 (          0) | x31: 0x00000000 (          0)


[STEP 6] Executing program...
-----------------------------------------------------------------

=== Starting CPU Execution ===

[STEP 0] PC=0x00000000, Instruction=0x123450B7
[DECODE DISPATCH] Opcode=0x37
[DECODE] LUI: rd=1, imm20=0x12345
[EXEC] LUI x1, 0x12345 -> x1 = 0x12345000

[STEP 1] PC=0x00000004, Instruction=0x00023117
[DECODE DISPATCH] Opcode=0x17
[DECODE] AUIPC: rd=2, imm20=0x00023
[EXEC] AUIPC x2, 0x00023 -> x2 = PC(0x00000004) + 0x00023000 = 0x00023004

[STEP 2] PC=0x00000008, Instruction=0x00108193
[DECODE DISPATCH] Opcode=0x13
[DECODE] I-Type: funct3=0x0, rs1=1, rd=3, imm=1
[EXEC] ADDI x3, x1, 1 -> x3 = 0x12345001 (rs1=0x12345000)

[STEP 3] PC=0x0000000C, Instruction=0x00302C23
[DECODE DISPATCH] Opcode=0x23
[DECODE] S-Type (placeholder)
[EXEC] SW x3, 24(x0) -> Store 0x12345001 to 0x00000028
[INFO] cpu_step: PC (0x00000010) reached end of program (program size: 16 bytes)

=== CPU Execution Finished ===
Total instructions executed: 4
-----------------------------------------------------------------

[DEBUG] Memory dump (data region) after execution:
00000010: 00000000
00000014: 00000000
00000018: 00000000
0000001c: 00000000
00000020: 00000000
00000024: 00000000
00000028: 12345001
0000002c: 00000000

[STEP 7] Final CPU state:
-----------------------------------------------------------------

=== CPU STATE ===
PC: 0x00000010
Instructions executed: 4
Halted: YES
Error: NO

=== REGISTERS ===
PC: 0x00000010
x00: 0x00000000 (          0) | x01: 0x12345000 (  305418240)
x02: 0x00023004 (     143364) | x03: 0x12345001 (  305418241)
x04: 0x00000000 (          0) | x05: 0x00000000 (          0)
x06: 0x00000000 (          0) | x07: 0x00000000 (          0)
x08: 0x00000000 (          0) | x09: 0x00000000 (          0)
x10: 0x00000000 (          0) | x11: 0x00000000 (          0)
x12: 0x00000000 (          0) | x13: 0x00000000 (          0)
x14: 0x00000000 (          0) | x15: 0x00000000 (          0)
x16: 0x00000000 (          0) | x17: 0x00000000 (          0)
x18: 0x00000000 (          0) | x19: 0x00000000 (          0)
x20: 0x00000000 (          0) | x21: 0x00000000 (          0)
x22: 0x00000000 (          0) | x23: 0x00000000 (          0)
x24: 0x00000000 (          0) | x25: 0x00000000 (          0)
x26: 0x00000000 (          0) | x27: 0x00000000 (          0)
x28: 0x00000000 (          0) | x29: 0x00000000 (          0)
x30: 0x00000000 (          0) | x31: 0x00000000 (          0)

-----------------------------------------------------------------

[SUMMARY]
  Program instructions: 4
  Instructions executed: 4
  Final PC: 0x00000010
  CPU halted: YES
  CPU error: NO

[CLEANUP] Freeing memory...
[OK] Cleanup complete

=================================================================
                    Execution Completed
=================================================================
